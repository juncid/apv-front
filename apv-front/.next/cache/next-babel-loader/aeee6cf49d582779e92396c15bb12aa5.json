{"ast":null,"code":"import _defineProperty from \"C:/Users/juanc/source/repos/apv-front/apv-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport Head from \"next/head\";\nimport mujerSAC from \"../public/assets/svg/mujersac.svg\";\nimport ChanchitoA from \"../public/assets/svg/chanchitoa.svg\";\nimport ChanchitoB from \"../public/assets/svg/chanchitob.svg\";\nimport { Formik, useFormik, Form } from \"formik\";\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchposts } from \"../store/actions/postAction\";\nimport { Card, Col, Table } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport ResultadoModal from '../components/ResultadoModal';\nexport var __N_SSP = true;\nexport default function Resultado(props) {\n  var _useState = useState(false),\n      modalShow = _useState[0],\n      setModalShow = _useState[1];\n\n  var handleClose = function handleClose() {\n    return setModalShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setModalShow(true);\n  };\n\n  var _useState2 = useState({}),\n      regimenData = _useState2[0],\n      setRegimenData = _useState2[1];\n\n  var initialValues = {\n    ahorro: ''\n  };\n\n  var handleSubmit = function handleSubmit(values) {\n    var nombre = regimenData.nombre !== undefined && regimenData.nombre;\n    var rutPrimero = regimenData.rut !== undefined && regimenData.rut;\n    var rutDv = regimenData.rutDv !== undefined && regimenData.rutDv;\n    var rut = rutPrimero + \"-\" + rutDv;\n    var correo = regimenData.correo !== undefined && regimenData.correo;\n    var celular = regimenData.celular !== undefined && regimenData.celular;\n    var sueldo = regimenData.sueldoLiquidoConsulta !== undefined && regimenData.sueldoLiquidoConsulta;\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    var body = {\n      nombre: nombre,\n      rut: rut,\n      correo: correo,\n      celular: celular,\n      sueldo: sueldo,\n      ahorro: values.ahorro\n    };\n    axios.post(props.urlIngresarSimulacion, body, {\n      headers: headers\n    }).then(function (response) {\n      var data = response.data;\n\n      if (data.idSimulacion) {\n        setRegimenData(data);\n      }\n    })[\"catch\"](function (e) {\n      console.log(e);\n    });\n  };\n\n  var validationSchema = Yup.object({\n    ahorro: Yup.string().matches(/^[0-9]+$/, \"Ingrese el monto en pesos que desea ahorrar desde $1.000.\").test('Sueldo-validacion', \"Ingrese un monto desde $1.000.\", function (value) {\n      return value >= 1000;\n    }).required('Por favor ingrese el monto que desea ahorrar desde $1.000.')\n  });\n  var formik = useFormik({\n    initialValues: initialValues,\n    handleSubmit: handleSubmit,\n    validationSchema: validationSchema\n  });\n  useEffect(function () {\n    setRegimenData(props.data);\n  }, []);\n  useEffect(function () {}, [regimenData]);\n  var sueldoLiquido = regimenData.sueldoLiquidoConsulta !== undefined && regimenData.sueldoLiquidoConsulta;\n  var ahorroMensual = regimenData.aporteApv !== undefined && regimenData.aporteApv;\n  var recomendacionApv = regimenData.recomendacionApv !== undefined && regimenData.recomendacionApv;\n  var beneficio = 0;\n  var total = 0;\n  var texto_regimen = '';\n\n  if (recomendacionApv === 'A') {\n    beneficio = regimenData.beneficioRegA;\n    total = ahorroMensual + beneficio;\n    texto_regimen = 'En  base a tu renta mensual y el monto del aporte quieres realizar el 15% de bonificaci�n por parte del Estado es el que m�s te conviene.';\n  } else if (recomendacionApv === 'B') {\n    beneficio = regimenData.beneficioRegB;\n    total = regimenData.sueldoLiquidoConApvregB;\n    texto_regimen = 'En  base a tu renta mensual y el monto del aporte quieres realizar el descuento de tu base tributaria es mayor al aporte del 15% de bonificaci�n del r�gimen A.';\n  }\n\n  var rutPrimero = regimenData.rut !== undefined && regimenData.rut;\n  var rutDv = regimenData.rutDv !== undefined && regimenData.rutDv;\n  var rut = rutPrimero + \"-\" + rutDv;\n  var body_eventos = {\n    \"sessionId\": \"string\",\n    \"eventoId\": 0,\n    \"result0\": regimenData.sueldoLiquidoConApvregA !== undefined && regimenData.sueldoLiquidoConApvregA,\n    \"result1\": regimenData.sueldoLiquidoConApvregB !== undefined && regimenData.sueldoLiquidoConApvregB,\n    \"result2\": 0,\n    \"rut\": rut\n  };\n\n  function contactarme() {\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    body_eventos.Evento_id = 2;\n    axios.post(props.urlIngresarEvento, body_eventos, {\n      headers: headers\n    }).then(function (response) {\n      var data = response.data;\n\n      if (data) {\n        window.location.href = \"/solicitud\";\n      }\n    })[\"catch\"](function (e) {\n      console.log(e);\n    });\n  }\n\n  var dudas_texto = \"Nuestros ejecutivos pueden asesorarte en l�nea o v�a tel�fonica. Queremos ayudarte a resolver todas tus inquietudes o darte todas las opciones para tu traspaso.\";\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Ahorro Previsional Voluntario | Resultado Simulaci\\uFFFDn | AFP Modelo\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"Aumenta tu sueldo l\\uFFFDquido, pagando una menor comisi\\uFFFDn de AFP. Simula tu aumento de sueldo al cambiarte a AFP Modelo.\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"robots\",\n        content: \"noindex, follow\"\n      })]\n    }), /*#__PURE__*/_jsx(\"section\", {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"resultado\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-12 mx-auto text-center header\",\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: recomendacionApv === 'A' ? ChanchitoA : ChanchitoB,\n              alt: recomendacionApv === 'A' ? \"regimen A\" : \"regimen B\"\n            }), /*#__PURE__*/_jsxs(\"h1\", {\n              children: [\"Te recomendamos el r\\uFFFDgimen \", recomendacionApv]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                children: texto_regimen\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-6 offset-md-1 d-flex\",\n            children: /*#__PURE__*/_jsx(Card, {\n              children: /*#__PURE__*/_jsxs(Card.Body, {\n                children: [/*#__PURE__*/_jsxs(Card.Text, {\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    children: \"Estos son los datos de tu simulaci\\uFFFDn:\"\n                  }), /*#__PURE__*/_jsxs(Table, {\n                    responsive: true,\n                    className: \"table-borderless\",\n                    children: [/*#__PURE__*/_jsx(\"thead\", {\n                      children: /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"th\", {\n                          children: ''\n                        }), /*#__PURE__*/_jsxs(\"th\", {\n                          className: \"text-right\",\n                          children: [\"Regimen \", recomendacionApv]\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsxs(\"tbody\", {\n                      children: [/*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"td\", {\n                          children: \"Sueldo l\\uFFFDquido:\"\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right\",\n                          children: [\"$\", sueldoLiquido.toLocaleString(\"es-CL\")]\n                        })]\n                      }), /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"td\", {\n                          children: \"Ahorro mensual:\"\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right\",\n                          children: [\"$\", ahorroMensual.toLocaleString(\"es-CL\")]\n                        })]\n                      }), /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"td\", {\n                          className: \"green-tabla\",\n                          children: recomendacionApv === 'A' ? 'Bonificaci�n fiscal:' : 'Descuento tributario:'\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right green-tabla\",\n                          children: [\"$\", beneficio.toLocaleString(\"es-CL\")]\n                        })]\n                      }), /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"td\", {\n                          children: recomendacionApv === 'A' ? 'Total ahorro:' : 'Nuevo sueldo l�quido:'\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right\",\n                          children: [\"$\", total.toLocaleString(\"es-CL\")]\n                        })]\n                      })]\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-12 text-center\",\n                  children: /*#__PURE__*/_jsx(Card.Link, {\n                    className: \"volver\",\n                    onClick: handleShow,\n                    children: \"Ver detalles de mi simulaci\\uFFFDn\"\n                  })\n                }), /*#__PURE__*/_jsx(ResultadoModal, {\n                  show: modalShow,\n                  onHide: handleClose,\n                  data: regimenData !== undefined && regimenData\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-md-4 d-flex flex-column calcularApv\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxs(Card, {\n                children: [/*#__PURE__*/_jsx(Card.Header, {\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    children: \"Calcular tu APV con otro monto:\"\n                  })\n                }), /*#__PURE__*/_jsx(Card.Body, {\n                  children: /*#__PURE__*/_jsx(Formik, {\n                    initialValues: initialValues,\n                    onSubmit: handleSubmit,\n                    validationSchema: validationSchema,\n                    children: function children(formik) {\n                      return /*#__PURE__*/_jsxs(Form, {\n                        className: \"form-inline\",\n                        children: [/*#__PURE__*/_jsxs(\"div\", {\n                          className: \"form-group input-wrapper d-block\",\n                          children: [/*#__PURE__*/_jsx(\"input\", _objectSpread({\n                            type: \"text\",\n                            className: \"form-control form-control-lg \".concat(formik.touched.ahorro ? formik.errors.ahorro ? \"is-invalid\" : \"is-valid\" : \"\"),\n                            id: \"ahorro\",\n                            name: \"ahorro\",\n                            \"aria-describedby\": \"ahorroAyuda\",\n                            placeholder: \"Ahorro Mensual\"\n                          }, formik.getFieldProps('ahorro'))), /*#__PURE__*/_jsx(\"label\", {\n                            htmlFor: \"ahorro\",\n                            className: \"control-label\",\n                            children: \"Sueldo Liquido\"\n                          }), /*#__PURE__*/_jsx(\"small\", {\n                            id: \"ahorroAyuda\",\n                            className: \"form-text \".concat(formik.touched.ahorro && formik.errors.ahorro && 'is-invalid'),\n                            children: formik.touched.ahorro && formik.errors.ahorro\n                          })]\n                        }), /*#__PURE__*/_jsx(\"div\", {\n                          className: \"d-flex justify-content-center\",\n                          children: /*#__PURE__*/_jsx(\"div\", {\n                            className: \"col justify-content-center d-flex\",\n                            children: /*#__PURE__*/_jsx(\"button\", {\n                              type: \"submit\",\n                              id: \"calcular\",\n                              className: \"volver\",\n                              disabled: !(formik.isValid && formik.dirty),\n                              children: \"Calcular\"\n                            })\n                          })\n                        })]\n                      });\n                    }\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"row detalle\",\n              children: /*#__PURE__*/_jsx(\"small\", {\n                children: \"*Renta tributable contempla descuentos legales, ahorro al fondo de pensiones (10%), comisi\\uFFFDn AFP Modelo (0,77%) y salud (7%).**Bonificaci\\uFFFDn fiscal de un 15% de tu ahorro voluntario mensual con un tope de 6 UTM anuales.\"\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row ctas\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-md-4 text-center d-block offset-md-2 container\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              children: \"\\uFFFDEres afiliado? Haz login para comenzar tu proceso de apertura\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                id: \"Apertura_Afiliado\",\n                className: \"btn btn-lg btn-block\",\n                children: \"Abrir mi APV\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"col-md-5 text-center d-block container\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              children: \"\\uFFFDNo eres afiliado? Nuestros ejecutivos te contactaran para asesorarte en la apertura.\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                id: \"Apertura_no_Afiliado\",\n                className: \"btn btn-lg btn-block blueBtn\",\n                children: \"Solicitar contacto\"\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row container-padre dudas\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-2 d-flex desktop\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: mujerSAC,\n              alt: \"Dudas\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-sm-12 col-md-6 offset-md-2 d-flex flex-column contenedor\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"txtDesktop parrafo2\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"container-title\",\n                children: [/*#__PURE__*/_jsx(\"h2\", {\n                  children: \"\\uFFFDA\\uFFFDn tienes dudas?\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  children: dudas_texto\n                }), /*#__PURE__*/_jsx(\"button\", {\n                  type: \"button\",\n                  id: \"Solicitud_Contacto\",\n                  className: \"btn btn-lg btn-block whiteBtn\",\n                  onClick: contactarme,\n                  children: \"Quiero que me contacten\"\n                })]\n              })\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}